const translations = {
    ms: {
        // Navigation
        nav_home: "Utama",
        nav_synopsis: "Sinopsis",
        nav_ar: "Mengenai AR",
        nav_team: "Pasukan Kami",
        nav_contact: "Hubungi Kami",

        // Index (Hero)
        hero_subtitle: "Legenda Rakyat Sabah",
        hero_title: "Lagenda <br><span class='highlight'>Jambatan Tamparuli</span>",
        hero_desc: "Alami kisah mistik <strong>Lagenda Jambatan Tamparuli</strong> melalui teknologi Realiti Diperkaya. Gabungan sejarah, sastera rakyat, dan inovasi digital menanti anda.",
        btn_ar: "⚡ Cuba AR Sekarang",
        btn_read: "Baca Kisah Penuh",
        footer_rights: "Hak Cipta Terpelihara.",

        // Sinopsis (FULL TEXT)
        synopsis_title: "Lagenda Tragis Tamparuli",
        synopsis_p1: "<strong>Tahun 1930-an:</strong> Di sebalik struktur konkrit yang kukuh, tersimpan sebuah rahsia lama. Pihak British berusaha membina jambatan merentasi Sungai Tamparuli, namun arus deras dan \"kuasa misteri\" sentiasa meruntuhkan binaan tersebut setiap kali ia hampir siap.",
        synopsis_p2: "Seorang pegawai British, <strong>Robinson</strong>, buntu mencari penyelesaian. Namun, di tengah kekalutan itu, hatinya tertawan oleh <strong>Solungkoi</strong>, gadis Dusun yang paling jelita di kampung tersebut. Percintaan dua benua ini berputik indah, namun dicemburui oleh Intang, seorang pemuda tempatan yang menaruh dendam.",
        synopsis_p3: "Demi memusnahkan Robinson, Intang menggunakan kepercayaan mistik. Melalui perantara Odu-Odu (dukun), dikatakan bahawa <strong>Tonduokar (Hantu Air)</strong> menuntut korban seorang gadis perawan yang paling cantik untuk mengizinkan jambatan itu berdiri teguh. Intang menghasut Robinson dan meyakinkannya bahawa hanya pengorbanan Solungkoi yang mampu menyelamatkan projek tersebut.",
        synopsis_p4: "Tersepit dalam dilema antara tugas kepada empayar dan cinta sejatinya, Robinson akhirnya tewas. Beliau melakukan pengkhianatan terbesar dengan membiarkan Solungkoi dikorbankan. Gadis itu diberi minuman memabukkan sebelum ditenggelamkan hidup-hidup di dasar sungai bersama tiang jambatan. Sebelum nafasnya terhenti, dia melafazkan sumpahan: <em>\"Jambatan ini tidak akan kukuh selagi darah Robinson tidak mengalir sama!\"</em>.",
        synopsis_p5: "Jambatan itu akhirnya teguh berdiri, namun jiwa Robinson musnah. Dihantui rasa bersalah yang tidak tertanggung, Robinson akhirnya mengukir nama <strong>SOLUNGKOI</strong> pada plat besi jambatan itu sebelum menamatkan riwayatnya sendiri dengan terjun ke dalam sungai yang sama. Kini, kisah mereka kekal sebagai peringatan abadi tentang harga sebuah kesetiaan dan pengorbanan.",

        // Tentang AR
        ar_title: "Cara Menggunakan AR",
        step_1: "Imbas Kod QR", step_1_desc: "Dapatkan akses aplikasi melalui kod QR yang disediakan.",
        step_2: "Pilih Bahasa", step_2_desc: "Pilih naratif dalam BM, English, atau Kadazan-Dusun.",
        step_3: "Sedia Buku", step_3_desc: "Buka buku cerita pada halaman yang mempunyai penanda.",
        step_4: "Halakan Kamera", step_4_desc: "Pastikan pencahayaan terang dan halakan kamera ke buku.",
        step_5: "Lihat Magis", step_5_desc: "Karakter dan animasi 3D akan muncul di atas buku!",
        step_6: "Interaksi", step_6_desc: "Sentuh skrin untuk mendengar audio atau melihat aksi.",
        ar_preview_header: "Visualisasi Digital",

        // Pasukan Kami
        team_title: "Pasukan Kami",
        supervisor_title: "Penyelia Projek",
        supervisor_role: "Pensyarah Teknologi Multimedia",
        supervisor_bio: "Pakar dalam teknologi interaktif, gamifikasi, dan AR/VR. Komited membimbing inovasi digital untuk pendidikan masa depan.",
        group_name: "Kumpulan 1",
        group_desc: "Pelajar Tahun 3 Teknologi Multimedia, Fakulti Komputeran dan Informatik, UMSKAL.",

        // Hubungi Kami
        contact_title: "Hubungi Kami",
        contact_intro: "Ada soalan tentang pembangunan AR kami? Temui kami di pameran atau ikuti media sosial rasmi kami.",
        lbl_location: "Lokasi",
        lbl_exhibition: "Pameran",

        // Cuba AR Page
        select_lang_title: "Pilih Bahasa AR",
        select_lang_desc: "Sila pilih bahasa untuk memulakan pengalaman AR.",
        modal_title: "Imbas Kod QR",
        modal_desc: "Halakan kamera telefon anda pada kod ini untuk melancarkan penapis AR."
    },

    en: {
        nav_home: "Home",
        nav_synopsis: "Synopsis",
        nav_ar: "About AR",
        nav_team: "Our Team",
        nav_contact: "Contact Us",

        hero_subtitle: "Folklore of Sabah",
        hero_title: "Legend of <br><span class='highlight'>Tamparuli Bridge</span>",
        hero_desc: "Experience the <strong>Legend of Tamparuli Bridge</strong> through Augmented Reality technology. A mystical blend of folklore and digital innovation awaits you.",
        btn_ar: "⚡ Try AR Now",
        btn_read: "Read Full Story",
        footer_rights: "All Rights Reserved.",

        synopsis_title: "The Tragic Legend",
        synopsis_p1: "<strong>1930s:</strong> Behind the sturdy concrete structure lies an ancient secret. The British attempted to build a bridge across the Tamparuli River, but strong currents and \"mysterious forces\" kept destroying the construction every time it neared completion.",
        synopsis_p2: "A British officer, <strong>Robinson</strong>, was at a loss. Amidst the chaos, he fell in love with <strong>Solungkoi</strong>, the fairest Dusun maiden in the village. Their love blossomed across cultures but was envied by Intang, a vengeful local youth.",
        synopsis_p3: "To destroy Robinson, Intang exploited mystical beliefs. Through the medium Odu-Odu, it was claimed that <strong>Tonduokar (The Water Spirit)</strong> demanded the sacrifice of the most beautiful maiden to allow the bridge to stand. Intang convinced Robinson that only Solungkoi could save the project.",
        synopsis_p4: "Torn between duty to the empire and his true love, Robinson committed the ultimate betrayal. Solungkoi was sacrificed alive at the riverbed. Before drowning, she cursed: <em>\"This bridge will not stand firm until Robinson's blood flows with it!\"</em>.",
        synopsis_p5: "The bridge stood firm, but Robinson's soul was shattered. Haunted by guilt, he carved the name <strong>SOLUNGKOI</strong> onto the bridge before taking his own life in the same river. Today, their story remains a reminder of the price of loyalty.",

        ar_title: "How To Use AR",
        step_1: "Scan QR", step_1_desc: "Access the app via the provided QR code.",
        step_2: "Select Language", step_2_desc: "Choose narrative in Malay, English, or Kadazan-Dusun.",
        step_3: "Prepare Book", step_3_desc: "Open the storybook to a page with a marker.",
        step_4: "Point Camera", step_4_desc: "Ensure good lighting and point your camera at the book.",
        step_5: "See Magic", step_5_desc: "3D characters will appear on the page!",
        step_6: "Interact", step_6_desc: "Touch screen to hear audio or trigger actions.",
        ar_preview_header: "Digital Visualization",

        team_title: "Our Team",
        supervisor_title: "Project Supervisor",
        supervisor_role: "Lecturer of Multimedia Technology Course, Faculty of Computing and Informatics",
        supervisor_bio: "Expert in interactive technology, gamification, and AR/VR. Guiding digital innovation for future education.",
        group_name: "Group 1",
        group_desc: "Year 3 Multimedia Technology Students, Faculty of Computing and Informatics, UMSKAL.",

        contact_title: "Contact Us",
        contact_intro: "Questions about our AR project? Meet us at the exhibition or follow our social media.",
        lbl_location: "Location",
        lbl_exhibition: "Exhibition",

        select_lang_title: "Select AR Language",
        select_lang_desc: "Please choose a language to start the AR experience.",
        modal_title: "Scan QR Code",
        modal_desc: "Point your phone camera at this code to launch the AR filter."
    },

    kd: {
        nav_home: "Tapsir",
        nav_synopsis: "Susuyan",
        nav_ar: "Pasal AR",
        nav_team: "Tinimungan",
        nav_contact: "Hubungi",
        footer_rights: "Hak Cipta Terpelihara.",

        hero_subtitle: "Susuyan Tulu Sabah",
        hero_title: "Susuyan <br><span class='highlight'>Jambatan Tamparuli</span>",
        hero_desc: "Porkoontok <strong>Susuyan Jambatan Tamparuli</strong> maya teknologi Augmented Reality. Piomungan susuyan tulu om inovasi digital.",
        btn_ar: "⚡ Cubao AR",
        btn_read: "Basao Susuyan",

        synopsis_title: "Susuyan Tulu Tamparuli",
        synopsis_p1: "<strong>Toun 1930:</strong> Diwato konkrit di agazo, haro susuyan tosorou. British mumang momonsoi jambatan id Bawang Tamparuli, nga aralom o waig om \"kuasa misteri\" mamarumbak dii.",
        synopsis_p2: "Pegawai British, <strong>Robinson</strong>, amu koilo nunuon. Id timpu dii, nokosion isio di <strong>Solungkoi</strong>, sumandak Dusun di olumis kopio. Piobpinayan diolo dicemburui di Intang.",
        synopsis_p3: "Moi do manangod di Robinson, i Intang minoboros do <strong>Tonduokar (Hantu Waig)</strong> mangahak do sumandak di olumis sabaagi korban. Intang minomboros di Robinson do Solungkoi no oporlu.",
        synopsis_p4: "Robinson minangada di Solungkoi. Pinoirak isido id suang bawang. Pogulu nopatai, minamara isido: <em>\"Jambatan diti amu kogirot gisom do raha di Robinson tumiris!\"</em>.",
        synopsis_p5: "Tu nokosorou do dusa, minonuat i Robinson ngaran <strong>SOLUNGKOI</strong> id jambatan dii pogulu minanangon id bawang dii.",

        ar_title: "Carano momoguno AR",
        step_1: "Imbas QR", step_1_desc: "Akses aplikasi maya QR.",
        step_2: "Pili Boros", step_2_desc: "Pili boros BM, English, toi Kadazan.",
        step_3: "Sedia Buuk", step_3_desc: "Ukabo buuk id bolikan di haro tanda.",
        step_4: "Halako Kamera", step_4_desc: "Pastikan anawau.",
        step_5: "Intaai Magis", step_5_desc: "Karakter 3D nopoimbulai!",
        step_6: "Interaksi", step_6_desc: "Tigogo skrin telefon nu.",

        team_title: "Tinimungan Dahai",
        supervisor_title: "Mononuduk Projek",
        supervisor_role: "Pensyarah Kursus Teknologi Multimedia, Fakulti Komputeran dan Informatik",
        supervisor_bio: "Pakar id teknologi interaktif om AR/VR.",
        group_name: "Tinimungan 1",
        group_desc: "Susumikul Toun 3 Teknologi Multimedia, Fakulti Komputeran dan Informatik, UMSKAL.",

        contact_title: "Hubungi Yahai",
        contact_intro: "Haro ula? Rumikot id pameran dahai toi intaai media sosial.",
        lbl_location: "Koiyonon",
        lbl_exhibition: "Pameran",

        select_lang_title: "Pili Boros AR",
        select_lang_desc: "Pili boros moi do popotimpuun.",
        modal_title: "Imbas Kod QR",
        modal_desc: "Halako kamera telefon nu hiti."
    }
};

function changeLanguage(lang) {
    localStorage.setItem('selectedLang', lang);
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            el.innerHTML = translations[lang][key];
        }
    });
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if(btn.dataset.lang === lang) btn.classList.add('active');
    });
}

document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('selectedLang') || 'ms';
    changeLanguage(savedLang);
});